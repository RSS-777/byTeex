import{r,c as P,j as e,u as y,S as E,R as b,P as U}from"./index-DiBZjKyR.js";const H=()=>{const[t,c]=r.useState(null),[i,a]=r.useState(!0);return r.useEffect(()=>{P.fetch(`*[_type == "userGeneratedContent"][0]{
      sectionTitle,
      sectionDescription,
      images,
      reviews[]{
        author{
          name,
          avatar
        },
        rating,
        text
      },
      ctaButton{
        text,
        image,
        link
      },
      reviewsInfo{
        stars,
        reviewCount
      }
    }`).then(o=>{c(o),a(!1)}).catch(o=>{console.error("Sanity fetch error:",o),a(!1)})},[]),{userGenerated:t,loading:i}},T=({images:t})=>{const[c,i]=r.useState(22);if(r.useEffect(()=>{const o=()=>{window.innerWidth<580?i(8):window.innerWidth<768?i(10):window.innerWidth<900?i(14):(window.innerWidth<1200,i(22))};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),!t||t.length===0)return null;const a=t.slice(0,c),d=Math.ceil(a.length/2);return e.jsx("div",{className:"grid grid-rows-2 gap-[5px] md:gap-[6px] w-full mt-[55px]",style:{gridTemplateColumns:`repeat(${d}, 1fr)`},children:a.map((o,l)=>e.jsx("div",{children:e.jsx("img",{src:y(o).width(200).url(),alt:o.alt||`User generated ${l}`,className:"w-full object-cover aspect-square"})},o._key||l))})},q=({review:t,onHeight:c,style:i})=>{const a=r.useRef(null);return r.useLayoutEffect(()=>{a.current&&c&&c(a.current.offsetHeight)},[a.current]),e.jsxs("div",{ref:a,style:i,className:"bg-[#FFFFFF] lg:border border-[#EAEAEA] lg:shadow-[0px_3px_10px_1px_#00000014] lg:rounded-lg p-8 flex flex-col w-full h-[fit-content]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.author?.avatar&&e.jsx("img",{src:y(t.author.avatar).width(48).url(),alt:t.author.name||"Author",className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(E,{stars:t.rating||0,text:""}),e.jsx("div",{children:t.author?.name&&e.jsx("p",{className:"text-[15px] leading-[23px] text-[#676869]",children:t.author.name??"A"})})]})]}),t.text&&e.jsx("p",{className:" font-[Work_Sans] text-[15px] leading-[23px] tracking-[4%] text-[#676869] flex-grow",children:t.text})]})},V=({children:t,modileSlideMaxWidth:c=299,desktopSlideMaxWidth:i=338,visibleSlidesDesktop:a=3})=>{const[d,o]=r.useState(0),[l,M]=r.useState(window.innerWidth<1024),[g,$]=r.useState(0),[h,A]=r.useState([]),[p,L]=r.useState(void 0),[m,W]=r.useState(40),[f,_]=r.useState(i),[w,G]=r.useState(c),C=16,u=b.Children.count(t),x=l?w:f,k=(l?w:f)+(l?0:m),v=h.length>0?Math.min(...h):void 0,R=l?x*u:x*u+(m*u-1)+C,j=l?(u-1)*x:(u-a)*(x+m),z=l?x:x*a+m*(a-1)+C,D=(n,s)=>{A(N=>{const S=[...N];return S[n]=s,S})};r.useEffect(()=>{h[g]!==void 0&&L(h[g])},[g,h]),r.useEffect(()=>{const n=()=>{const s=window.innerWidth;M(s<1024),_(Math.min(i,Math.max(200,s/1465*i))),G(Math.min(c,Math.max(100,s/430*c))),W(s>=1200?40:s>=768?20:10),o(0)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),r.useEffect(()=>{const n=Math.round(d/x);$(n)},[d]);const F=()=>{o(n=>{const s=n+k;return s<=j?s:j})},I=()=>{o(n=>Math.max(n-k,0))},B=n=>{const s=n*x;o(s)};return e.jsxs("div",{className:"relative w-[fit-content] mt-[37px] md:mt-[75px] mx-auto border border-[#EAEAEA] lg:border-none shadow-[0px_3px_10px_1px_#00000014] rounded-lg lg:shadow-none lg:rounded-none",children:[e.jsx("div",{className:"relative overflow-hidden h-auto lg:h-auto lg:py-2 lg:px-2 rounded-lg",style:{width:z},children:e.jsx("div",{className:"flex gap-0 lg:gap-[40px]",style:{transform:`translateX(-${d}px)`,height:l?`${p}px`:"auto",minWidth:R,gap:l?0:m,transition:"transform 0.4s ease, height 0.4s ease"},children:b.Children.map(t,(n,s)=>b.isValidElement(n)?b.cloneElement(n,{onHeight:N=>D(s,N),style:{width:l?w:f,flexShrink:0}}):n)},l?`mobile-${w}`:`desktop-${f}`)}),e.jsx("button",{onClick:I,className:"absolute left-[-58px] max-[390px]:left-[-38px] transform -translate-y-1/2 p-2 z-10 cursor-pointer",style:{top:v&&!l?`${v/2+12}px`:p?`${p/2}px`:"50%"},disabled:d===0,"aria-label":"Previous image",children:e.jsx("svg",{className:`w-6 h-6 ${d===0?"text-[#C5C5C5]":"text-[#676869]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:F,className:"absolute right-[-58px] max-[390px]:right-[-38px] transform -translate-y-1/2 p-2 z-10 cursor-pointer",style:{top:v&&!l?`${v/2+12}px`:p?`${p/2}px`:"50%"},disabled:d===j,"aria-label":"Next image",children:e.jsx("svg",{className:`w-6 h-6 ${d===j?"text-[#C5C5C5]":"text-[#676869]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"relative bottom-[-35px] flex justify-center gap-2 lg:hidden",children:Array.from({length:u}).map((n,s)=>e.jsx("button",{onClick:()=>B(s),className:`w-3 h-3 rounded-full cursor-pointer ${g===s?"bg-[#000000]":"bg-[#C4C4C4]"}`,"aria-label":`Go to slide ${s+1}`},s))})]})},J=()=>{const{userGenerated:t,loading:c}=H();if(c)return e.jsx("p",{className:"p-6 text-center",children:"Loading user generated content..."});if(!t)return e.jsx("p",{className:"p-6 text-center",children:"No user generated content found"});const i=[...t.reviews??[],...t.reviews??[]];return e.jsxs("section",{className:"w-full bg-white pt-[59px] md:pt-[74px]",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-[#0b0b3b] mx-3",children:t.sectionTitle}),e.jsx("p",{className:" mx-auto text-[#676869] text-[15px] leading-[23px] max-w-[613px] px-[20px] mt-[25px]",children:t.sectionDescription})]}),e.jsx(T,{images:t.images??[]}),e.jsxs("div",{className:"px-[20px]",children:[e.jsx(V,{visibleSlidesDesktop:3,modileSlideMaxWidth:299,desktopSlideMaxWidth:338,children:i.map((a,d)=>e.jsx(q,{review:a},a._key||d))}),e.jsx(U,{link:t.ctaButton?.link||"#",text:t.ctaButton?.text||"Learn More",classNameButton:"mt-[63px]"}),e.jsx(E,{stars:t.reviewsInfo?.stars||0,text:t.reviewsInfo?.reviewCount||"",className:"mt-[12px] justify-center"})]})]})};export{J as UserGenerated,J as default};
